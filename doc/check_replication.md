Check replication


Using query `select * from "SYS"."M_SERVICE_REPLICATION"` on the primary HANA can solve this problem.

we only need to make sure that for every volume 'REPLICATION_STATUS' == 'ACTIVE', if not, show the 'REPLICATION_STATUS_DETAILS' to the user and log it.


Full output of the query:

HOST;PORT;VOLUME_ID;SITE_ID;SITE_NAME;SECONDARY_HOST;SECONDARY_PORT;SECONDARY_SITE_ID;SECONDARY_SITE_NAME;SECONDARY_ACTIVE_STATUS;SECONDARY_CONNECT_TIME;SECONDARY_RECONNECT_COUNT;SECONDARY_FAILOVER_COUNT;SECONDARY_FULLY_RECOVERABLE;REPLICATION_MODE;REPLICATION_STATUS;REPLICATION_STATUS_DETAILS;FULL_SYNC;LAST_LOG_POSITION;LAST_LOG_POSITION_TIME;LAST_SAVEPOINT_VERSION;LAST_SAVEPOINT_LOG_POSITION;LAST_SAVEPOINT_START_TIME;SHIPPED_LOG_POSITION;SHIPPED_LOG_POSITION_TIME;SHIPPED_LOG_BUFFERS_COUNT;SHIPPED_LOG_BUFFERS_SIZE;SHIPPED_LOG_BUFFERS_DURATION;SHIPPED_SAVEPOINT_VERSION;SHIPPED_SAVEPOINT_LOG_POSITION;SHIPPED_SAVEPOINT_START_TIME;SHIPPED_FULL_REPLICA_COUNT;SHIPPED_FULL_REPLICA_SIZE;SHIPPED_FULL_REPLICA_DURATION;SHIPPED_LAST_FULL_REPLICA_SIZE;SHIPPED_LAST_FULL_REPLICA_START_TIME;SHIPPED_LAST_FULL_REPLICA_END_TIME;SHIPPED_DELTA_REPLICA_COUNT;SHIPPED_DELTA_REPLICA_SIZE;SHIPPED_DELTA_REPLICA_DURATION;SHIPPED_LAST_DELTA_REPLICA_SIZE;SHIPPED_LAST_DELTA_REPLICA_START_TIME;SHIPPED_LAST_DELTA_REPLICA_END_TIME;ASYNC_BUFFER_FULL_COUNT;BACKLOG_SIZE;MAX_BACKLOG_SIZE;BACKLOG_TIME;MAX_BACKLOG_TIME
hana02;30,001;1;1;WDF;hana01;30,001;2;ROT;YES;Jun 1, 2017 3:21:42.718079 PM;0;0;TRUE;SYNCMEM;ACTIVE;;DISABLED;390,464;Jun 1, 2017 3:22:10.788313 PM;20;389,762;Jun 1, 2017 3:21:45.464747 PM;390,464;Jun 1, 2017 3:22:10.788313 PM;18;73,728;38,093;18;389,442;Jun 1, 2017 3:21:42.721812 PM;1;68,591,616;2,438,553;68,591,616;Jun 1, 2017 3:21:42.721812 PM;Jun 1, 2017 3:21:45.160365 PM;0;0;0;0;?;?;0;0;0;0;0
hana02;30,007;2;1;WDF;hana01;30,007;2;ROT;YES;Jun 1, 2017 3:21:54.353393 PM;1;0;TRUE;SYNCMEM;ACTIVE;;DISABLED;306,112;Jun 1, 2017 3:21:38.74293 PM;18;306,050;Jun 1, 2017 3:21:55.1367 PM;306,112;?;3;12,288;5,832;16;305,986;Jun 1, 2017 3:21:54.364099 PM;1;68,894,720;661,717;68,894,720;Jun 1, 2017 3:21:54.364099 PM;Jun 1, 2017 3:21:55.025816 PM;0;0;0;0;?;?;0;0;0;0;0
hana02;30,003;3;1;WDF;hana01;30,003;2;ROT;YES;Jun 1, 2017 3:21:55.206385 PM;1;0;TRUE;SYNCMEM;ACTIVE;;DISABLED;31,652,736;Jun 1, 2017 3:22:16.888321 PM;19;31,652,610;Jun 1, 2017 3:22:10.789819 PM;31,652,736;Jun 1, 2017 3:22:16.888321 PM;5;20,480;4,315;17;31,652,482;Jun 1, 2017 3:21:55.209592 PM;1;1,616,973,824;15,439,752;1,616,973,824;Jun 1, 2017 3:21:55.209592 PM;Jun 1, 2017 3:22:10.649344 PM;0;0;0;0;?;?;0;0;0;0;0